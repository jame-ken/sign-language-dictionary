<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ASL Fighter</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    :root {
      --bg-purple: #f3e5f5;
      --card-purple: #e1bee7;
      --nav-purple: #7b1fa2;
      --text-purple: #4a148c;
      --accent-purple: #9c27b0;
      --success-green: #2e7d32;
      --timer-gold: #ffd700;
      --hell-bg: #1a0000;
      --ultra-bg: #000000;
    }

    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background-color: var(--bg-purple);
      color: var(--text-purple);
      margin: 0;
      padding-bottom: 50px;
      user-select: none;
      transition: all 1s ease;
    }

    body.hell-mode { background-color: var(--hell-bg); color: #ff4d4d; }
    body.ultra-mode { background: var(--ultra-bg); color: #00ffcc; }

    .dashboard {
      background-color: var(--nav-purple);
      padding: 15px 40px;
      display: flex;
      justify-content: space-between; 
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    .home-icon { font-size: 32px; color: white; transition: opacity 0.3s; text-decoration: none; }
    .home-icon:hover { opacity: 0.8; }

    .nav-links { display: flex; align-items: center; }
    .nav-links a {
      color: white;
      text-decoration: none;
      font-size: 22px;
      font-weight: bold;
      margin-left: 30px;
      transition: opacity 0.3s;
    }
    .nav-links a:hover { opacity: 0.8; }

    header { text-align: center; padding: 40px 20px; }
    header h1 { font-size: 60px; margin: 0; color: var(--text-purple); }

    .game-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px;
      background-color: var(--card-purple);
      border: 4px solid var(--accent-purple);
      border-radius: 25px;
      box-shadow: 0 8px 20px rgba(74, 20, 140, 0.1);
      text-align: center;
      position: relative; /* For the overlay */
      overflow: hidden;
    }

    .boss-container {
      background: white;
      border: 4px solid var(--nav-purple);
      border-radius: 20px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .boss-sprite { font-size: 80px; margin: 10px 0; animation: float 3s ease-in-out infinite; }
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

    .timer-bar { width: 100%; height: 15px; background: #ddd; border-radius: 10px; overflow: hidden; margin-bottom: 20px; }
    #timer-fill { width: 100%; height: 100%; background: var(--timer-gold); }

    .stats-row { display: flex; justify-content: space-around; font-weight: bold; margin-bottom: 15px; font-size: 1.2rem; }

    .sequence-tracker { display: flex; justify-content: center; gap: 10px; margin: 15px 0; flex-wrap: wrap; }
    .slot {
      min-width: 60px; height: 70px; border: 2px solid var(--nav-purple);
      border-radius: 10px; display: flex; align-items: center; justify-content: center;
      font-size: 24px; font-weight: bold; background: #eee; color: transparent; padding: 0 15px;
    }
    .slot.active { background: white; color: var(--nav-purple); border-width: 4px; }
    .slot.revealed { background: #c8e6c9; color: var(--text-purple); border-color: #4caf50; }

    .attack-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px; margin-top: 20px; }

    .attack-btn {
      background: white; border: 2px solid var(--accent-purple);
      border-radius: 12px; padding: 15px; cursor: pointer;
      display: flex; flex-direction: column; align-items: center;
      box-shadow: 0 4px 0 var(--accent-purple);
      transition: 0.1s;
    }
    .attack-btn:active { transform: translateY(3px); box-shadow: none; }
    .attack-btn img { width: 110px; height: 110px; object-fit: contain; }

    #battle-log { font-weight: bold; font-size: 1.2rem; min-height: 30px; margin-bottom: 10px; }

    .menu-btn {
      background: var(--nav-purple); color: white; border: none;
      padding: 20px 40px; font-size: 24px; border-radius: 15px;
      margin: 10px; cursor: pointer; font-weight: bold; width: 300px;
      transition: transform 0.2s;
    }
    .menu-btn:hover { background: var(--accent-purple); transform: scale(1.05); }

    .back-btn {
      background: #666; color: white; border: none;
      padding: 10px 20px; border-radius: 8px; cursor: pointer;
      margin-top: 20px; font-weight: bold;
    }
    .back-btn:hover { background: #444; }

    /* Game Over Overlay */
    #game-over-screen {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(74, 20, 140, 0.95);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      z-index: 2000;
    }
    #game-over-screen h2 { font-size: 3rem; margin-bottom: 10px; }
    #final-score { font-size: 2rem; margin-bottom: 30px; }

    .instructions {
      max-width: 900px;
      margin: 40px auto;
      padding: 30px;
      background-color: white;
      border-radius: 20px;
      border: 2px solid var(--accent-purple);
      text-align: left;
    }
    .instructions h2 { color: var(--nav-purple); margin-top: 0; }
    .instructions ul { line-height: 1.6; }
    .instructions li { margin-bottom: 10px; }

    @media (max-width: 850px) {
      header h1 { font-size: 40px; }
      .nav-links a { margin-left: 15px; font-size: 18px; }
    }
  </style>
</head>
<body>

  <nav class="dashboard">
    <a href="index.html" class="home-icon"><i class="fas fa-house"></i></a>
    <div id="mode-tag" style="font-weight: 900; color: #ffd700;">GAME SELECTION</div>
    <div class="nav-links">
      <a href="Alphabet.html">Alphabet</a>
      <a href="Numbers.html">Numbers</a>
      <a href="WordsPhrases.html">Phrases</a>
    </div>
  </nav>

  <header>
    <h1>ASL Fighter</h1>
    <p id="game-subtitle">Choose your challenge to begin.</p>
  </header>

  <div class="game-container" id="main-area">
    <div id="game-over-screen">
        <h2>GAME OVER</h2>
        <div id="final-score">SCORE: 0</div>
        <button class="menu-btn" onclick="resetToMenu()">Return to Menu</button>
    </div>

    <div id="game-menu">
      <button class="menu-btn" onclick="selectMode('alpha')">Alphabet</button><br>
      <button class="menu-btn" onclick="selectMode('num')">Numbers</button><br>
      <button class="menu-btn" onclick="selectMode('phrase')">Phrases</button>
    </div>

    <div id="battle-ui" style="display: none;">
        <div class="stats-row">
            <div id="stage-text">STAGE: <span id="lvl-display">1</span></div>
            <div id="score-display">SCORE: 0</div>
            <div>UNLOCKED: <span id="col-count">0</span></div>
        </div>
        <div class="timer-bar"><div id="timer-fill"></div></div>
        <div class="boss-container">
            <h2 id="m-name" style="margin: 0; color: var(--nav-purple);">??</h2>
            <div class="boss-sprite" id="m-sprite">‚ùì</div>
            <div id="battle-log">Choose your starter!</div>
            <div class="sequence-tracker" id="seq-tracker"></div>
        </div>
        <div class="attack-grid" id="attack-options"></div>
        <button class="back-btn" onclick="resetToMenu()">‚Üê Back to Menu</button>
    </div>
  </div>

  <div class="instructions">
    <h2>How to Play</h2>
    <ul>
      <li><strong>Select a Mode:</strong> Choose between Alphabet, Numbers, or Phrases to start your training.</li>
      <li><strong>Choose your Starter:</strong> At the beginning, click one of the three random ASL signs to add it to your arsenal.</li>
      <li><strong>Defeat the Monsters:</strong> Look at the <strong>Sequence Tracker</strong> (the boxes below the monster). You must click the hand gesture buttons that match the words/letters in the sequence.</li>
      <li><strong>Watch the Timer:</strong> The gold bar is your time! If it runs out, the game is over. Correct answers reset the level, but wrong answers subtract 1 second.</li>
      <li><strong>Unlock Signs:</strong> Every time you clear a stage, a new sign is added to your collection, making the game more challenging as you go!</li>
    </ul>
  </div>

  <script>
    const dataPools = {
        alpha: "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").map(l => ({id: l, img: `https://www.lifeprint.com/asl101/fingerspelling/abc-gifs/${l.toLowerCase()}.gif`})),
        num: [
            {id: "1", img: "ASL1.jpg"},
            {id: "2", img: "ASL2jpeg"},
            {id: "3", img: "ASL3.jpeg"},
            {id: "4", img: "ASL4.jpg"},
            {id: "5", img: "ASL5.jpg"},
            {id: "6", img: "ASL6.jpg"},
            {id: "7", img: "ASL7.jpg"},
            {id: "8", img: "ASL8.jpg"},
            {id: "9", img: "ASL9.jpeg"},
            {id: "10", img: "ASL10.gif"}
        ],
        phrase: [
            {id: "Hello", img: "https://res.cloudinary.com/spiralyze/image/upload/f_auto,w_300/BabySignLanguage/DictionaryPages/hello-webp.webp"},
            {id: "Please", img: "https://res.cloudinary.com/spiralyze/image/upload/f_auto,w_300/BabySignLanguage/DictionaryPages/please-webp.webp"},
            {id: "Thanks", img: "https://res.cloudinary.com/spiralyze/image/upload/f_auto,w_300/BabySignLanguage/DictionaryPages/thank_you-webp.webp"},
            {id: "Sorry", img: "https://res.cloudinary.com/spiralyze/image/upload/f_auto,w_300/BabySignLanguage/DictionaryPages/sorry-webp.webp"},
            {id: "Yes", img: "https://res.cloudinary.com/spiralyze/image/upload/f_auto,w_300/BabySignLanguage/DictionaryPages/yes-webp.webp"},
            {id: "No", img: "https://res.cloudinary.com/spiralyze/image/upload/f_auto,w_300/BabySignLanguage/DictionaryPages/no-webp.webp"},
            {id: "Eat", img: "https://res.cloudinary.com/spiralyze/image/upload/f_auto,w_300/BabySignLanguage/DictionaryPages/eat-webp.webp"},
            {id: "Drink", img: "https://res.cloudinary.com/spiralyze/image/upload/f_auto,w_300/BabySignLanguage/DictionaryPages/drink-webp.webp"},
            {id: "More", img: "https://res.cloudinary.com/spiralyze/image/upload/f_auto,w_300/BabySignLanguage/DictionaryPages/more-webp.webp"},
            {id: "Mother", img: "https://res.cloudinary.com/spiralyze/image/upload/f_auto,w_300/BabySignLanguage/DictionaryPages/mommy-webp.webp"},
            {id: "Father", img: "https://res.cloudinary.com/spiralyze/image/upload/f_auto,w_300/BabySignLanguage/DictionaryPages/daddy-webp.webp"}
        ]
    };

    const monsters = [
        { name: "Slime", icon: "üëæ" }, 
        { name: "Ghost", icon: "üëª" }, 
        { name: "Hydra", icon: "üê≤" },
        { name: "Skeleton", icon: "üíÄ" },
        { name: "Goblin", icon: "üë∫" },
        { name: "Vampire", icon: "üßõ" },
        { name: "Werewolf", icon: "üê∫" },
        { name: "Robot", icon: "ü§ñ" },
        { name: "Alien", icon: "üëΩ" },
        { name: "Demon", icon: "üëø" },
        { name: "Wizard", icon: "üßô" },
        { name: "Zombie", icon: "üßü" }
    ];

    let activePool = [], unlockedSigns = [], currentSequence = [], currentIndex = 0, level = 1, score = 0, timeLeft = 0, timeLimit = 10, timerInterval;

    function selectMode(mode) {
        activePool = JSON.parse(JSON.stringify(dataPools[mode])); 
        unlockedSigns = [];
        level = 1;
        score = 0;
        document.getElementById('game-over-screen').style.display = 'none';
        document.getElementById('game-menu').style.display = 'none';
        document.getElementById('battle-ui').style.display = 'block';
        document.getElementById('mode-tag').innerText = mode.toUpperCase() + " MODE";
        document.getElementById('score-display').innerText = "SCORE: 0";
        initGame();
    }

    function resetToMenu() {
        clearInterval(timerInterval);
        document.getElementById('game-over-screen').style.display = 'none';
        document.getElementById('game-menu').style.display = 'block';
        document.getElementById('battle-ui').style.display = 'none';
        document.getElementById('mode-tag').innerText = "GAME SELECTION";
        document.getElementById('game-subtitle').innerText = "Choose your challenge to begin.";
    }

    function initGame() {
      const grid = document.getElementById('attack-options');
      grid.innerHTML = "";
      const starters = [];
      for(let i=0; i<Math.min(3, activePool.length); i++) {
            let idx = Math.floor(Math.random() * activePool.length);
            starters.push(activePool.splice(idx, 1)[0]);
      }
      starters.forEach(item => {
        const btn = document.createElement('div');
        btn.className = 'attack-btn';
        btn.innerHTML = `<img src="${item.img}" onerror="this.src='https://via.placeholder.com/110?text=Missing+File'">`;
        btn.onclick = () => { unlockedSigns.push(item); startLevel(); };
        grid.appendChild(btn);
      });
    }

    function startLevel() {
      currentIndex = 0;
      const monster = monsters[Math.floor(Math.random() * monsters.length)];
      document.getElementById('m-name').innerText = monster.name;
      document.getElementById('m-sprite').innerText = monster.icon;
      document.getElementById('lvl-display').innerText = level;
      document.getElementById('col-count').innerText = unlockedSigns.length;
      timeLimit = Math.max(3, 12 - (level * 0.5));
      timeLeft = timeLimit;
      generateSequence();
      renderUI();
      runTimer();
    }

    function generateSequence() {
      currentSequence = [];
      let len = 2 + Math.floor(level / 4);
      for(let i=0; i<len; i++) currentSequence.push(unlockedSigns[Math.floor(Math.random() * unlockedSigns.length)]);
    }

    function renderUI() {
      document.getElementById('seq-tracker').innerHTML = currentSequence.map((item, i) => `<div class="slot ${i === 0 ? 'active' : ''}" id="slot-${i}">${item.id}</div>`).join('');
      const grid = document.getElementById('attack-options');
      grid.innerHTML = "";
      unlockedSigns.forEach(item => {
        const btn = document.createElement('div');
        btn.className = 'attack-btn';
        btn.innerHTML = `<img src="${item.img}" onerror="this.src='https://via.placeholder.com/110?text=Error'">`;
        btn.onclick = () => handleInput(item.id);
        grid.appendChild(btn);
      });
    }

    function handleInput(id) {
      if(id === currentSequence[currentIndex].id) {
        document.getElementById(`slot-${currentIndex}`).className = "slot revealed";
        score += 10;
        document.getElementById('score-display').innerText = "SCORE: " + score;
        currentIndex++;
        if(currentIndex === currentSequence.length) winLevel();
        else document.getElementById(`slot-${currentIndex}`).className = "slot active";
      } else {
        timeLeft -= 1.0;
        document.getElementById('battle-log').innerText = "MISS! -1s";
      }
    }

    function winLevel() {
      clearInterval(timerInterval);
      if(activePool.length > 0) {
        unlockedSigns.push(activePool.splice(Math.floor(Math.random() * activePool.length), 1)[0]);
        document.getElementById('battle-log').innerText = "NEW SIGN UNLOCKED!";
      }
      level++;
      setTimeout(startLevel, 1000);
    }

    function runTimer() {
      clearInterval(timerInterval);
      timerInterval = setInterval(() => {
        timeLeft -= 0.1;
        document.getElementById('timer-fill').style.width = (timeLeft / timeLimit) * 100 + "%";
        if(timeLeft <= 0) {
          clearInterval(timerInterval);
          // Internal Game Over Screen
          document.getElementById('final-score').innerText = "FINAL SCORE: " + score;
          document.getElementById('game-over-screen').style.display = 'flex';
        }
      }, 100);
    }
  </script>
</body>
</html>
